{"version":3,"sources":["webpack:///./node_modules/echarts/lib/component/tooltip.js","webpack:///./node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipContent.js","webpack:///./node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","webpack:///./node_modules/echarts/lib/component/axisPointer/globalListener.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipView.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","webpack:///./node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","webpack:///./node_modules/echarts/lib/component/axis/AxisView.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipModel.js","webpack:///./node_modules/echarts/lib/component/axisPointer.js","webpack:///./node_modules/echarts/lib/component/axisPointer/modelHelper.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","webpack:///./node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","webpack:///./node_modules/echarts/lib/component/axisPointer/axisTrigger.js","webpack:///./node_modules/echarts/lib/component/axis/AxisBuilder.js","webpack:///./node_modules/echarts/lib/component/axisPointer/viewHelper.js"],"names":["echarts","registerAction","type","event","update","zrUtil","layout","gridModel","axisModel","opt","grid","coordinateSystem","axis","otherAxisOnZeroOf","getAxesOnZeroOf","rawAxisPosition","position","axisPosition","axisDim","dim","rect","getRect","rectBound","x","width","y","height","idx","left","right","top","bottom","onZero","axisOffset","get","posBound","onZeroCoord","toGlobalCoord","dataToCoord","Math","max","min","rotation","PI","dirMap","labelDirection","tickDirection","nameDirection","labelOffset","retrieve","labelInside","labelRotate","z2","exports","zrColor","eventUtil","env","formatUtil","each","toCamelCase","vendors","gCssText","assembleTransition","duration","transitionCurve","transitionText","map","vendorPrefix","join","assembleFont","textStyleModel","cssText","fontSize","color","getTextColor","push","getFont","round","name","val","assembleCssText","tooltipModel","transitionDuration","backgroundColor","getModel","padding","canvasSupported","toHex","borderName","camelCase","normalizeCssArray","TooltipContent","container","api","wxa","el","document","createElement","zr","this","_zr","getZr","_x","getWidth","_y","getHeight","appendChild","_container","_show","_hideTimeout","self","onmouseenter","_enterable","clearTimeout","_inContent","onmousemove","e","window","handler","normalizeEvent","dispatch","onmouseleave","hideLater","_hideDelay","prototype","constructor","stl","currentStyle","defaultView","getComputedStyle","domStyle","style","show","display","innerHTML","pointerEvents","setContent","content","setEnterable","enterable","getSize","clientWidth","clientHeight","moveTo","viewportRootOffset","painter","getViewportRootOffset","offsetLeft","offsetTop","hide","time","setTimeout","bind","isShow","getOuterSize","parseInt","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","_default","module","modelUtil","finder","ecModel","seriesModel","point","seriesIndex","getSeriesByIndex","data","getData","dataIndex","queryDataIndex","isArray","getItemGraphicEl","coordSys","getTooltipPosition","dataToPoint","getValues","dimensions","mapDimension","getBoundingRect","clone","applyTransform","transform","_model","makeInner","inner","register","key","node","records","initGlobalListeners","record","useHandler","eventType","cb","on","dis","makeDispatchAction","dispatchAction","dispatchTooltipFinally","pendings","initialized","curry","doEnter","onLeave","actuallyPayload","showLen","showTip","length","hideLen","hideTip","currTrigger","payload","pendingList","unregister","TooltipRichContent","numberUtil","graphic","findPointFromSeries","layoutUtil","Model","globalListener","axisHelper","axisPointerViewHelper","getTooltipRenderMode","parsePercent","proxyRect","Rect","shape","extendComponentView","init","tooltipContent","getComponent","renderMode","_renderMode","getDom","_newLine","_tooltipContent","render","group","removeAll","_tooltipModel","_ecModel","_api","_lastDataByCoordSys","_alwaysShowContent","_initGlobalListener","_keepShow","triggerOn","indexOf","_tryShow","_hide","_lastX","_lastY","_refreshUpdateTimeout","isDisposed","manuallyShowTip","from","uid","_ticket","dataByCoordSys","tooltip","offsetX","offsetY","target","tooltipOption","_manuallyAxisShowTip","pointInfo","cx","cy","findHover","manuallyHideTip","coordSysAxesInfo","buildTooltipModel","getItemModel","model","_showAxisTooltip","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","delay","_showTimout","globalTooltipModel","singleDefaultHTML","singleParamsList","singleTooltipModel","newLine","markers","itemCoordSys","dataByAxis","item","axisIndex","axisValue","value","seriesDefaultHTML","valueLabel","getValueLabel","seriesDataIndices","valueLabelOpt","idxItem","series","dataIndexInside","dataParams","getDataParams","axisType","axisId","getAxisRawValue","axisValueLabel","html","seriesTooltip","formatTooltip","isObject","newMarkers","merge","firstLine","encodeHTML","reverse","positionExpr","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","random","undefined","dataModel","dataType","tooltipTrigger","defaultHtml","params","asyncTicket","getRawIndex","tooltipOpt","formatter","subTooltipModel","formatTpl","callback","cbTicket","viewWidth","viewHeight","contentSize","align","vAlign","viewSize","slice","layoutRect","getLayoutRect","pos","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","j","newIdxItem","dispose","modelCascade","resultModel","pop","isInstance","gapH","gapV","size","domWidth","domHeight","gap","rectWidth","rectHeight","AxisPointerModel","extendComponentModel","defaultOption","zlevel","z","snap","triggerTooltip","status","link","animation","animationDurationUpdate","lineStyle","shadowStyle","label","precision","margin","borderColor","borderWidth","shadowBlur","shadowColor","handle","icon","shadowOffsetX","shadowOffsetY","throttle","BaseAxisPointer","viewHelper","cartesianAxisHelper","AxisView","CartesianAxisPointer","extend","makeElOption","elOption","axisPointerModel","axisPointerType","otherExtent","getCartesian","getOtherAxis","getGlobalExtent","pixelValue","elStyle","buildElStyle","pointerOption","pointerShapeBuilder","graphicKey","pointer","layoutInfo","buildCartesianSingleLabelElOption","getHandleTransform","labelMargin","getTransformedPosition","updateHandleTransform","delta","axisExtent","dimIndex","currPosition","cursorOtherValue","cursorPoint","tooltipOptions","verticalAlign","index","line","targetShape","makeLineShape","getAxisDimIndex","subPixelOptimize","shadow","bandWidth","getBandWidth","span","makeRectShape","registerAxisPointerClass","_config","__DEV__","axisPointerModelHelper","_axisPointer","axisPointerClass","fixValue","superApply","arguments","updateAxisPointer","force","remove","axisPointer","disposeAxisPointer","axisView","forceRender","Clazz","getAxisPointerClass","getAxisPointerModel","axisPointerClazz","clazz","Text","attr","markerRich","text","prefix","suffix","startId","endId","substr","textWidth","textHeight","textBorderRadius","textBackgroundColor","textOffset","rich","textLineHeight","textFill","textPadding","add","bounding","dependencies","showContent","trigger","alwaysShowContent","displayMode","confine","showDelay","hideDelay","borderRadius","extraCssText","animationEasingUpdate","crossStyle","textStyle","axisTrigger","registerPreprocessor","option","registerProcessor","PRIORITY","PROCESSOR","STATISTIC","collect","result","axesInfo","seriesInvolved","coordSysMap","collectAxesInfo","collectSeriesInfo","globalAxisPointerModel","linksOption","linkGroups","getCoordinateSystems","axisPointerEnabled","coordSysKey","makeKey","axesInfoInCoordSys","coordSysModel","baseTooltipModel","getAxes","saveTooltipAxisInfo","getTooltipAxes","triggerAxis","cross","tooltipAxes","baseAxes","otherAxes","fromTooltip","axisPointerShow","isHandleTrigger","makeAxisPointerModel","involveSeries","axisInfo","useHandle","seriesModels","groupIndex","getLinkGroupIndex","linkGroup","mapper","tooltipAxisPointerModel","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","defaults","eachSeries","seriesTooltipTrigger","seriesTooltipShow","getAxis","seriesDataCount","count","i","linkOption","checkPropInLink","id","componentIndex","linkPropValue","axisPropValue","getAxisInfo","scale","parse","extent","getExtent","isBlank","AxisPointerView","clazzUtil","eventTool","throttleUtil","updateProps","animationModel","moveAnimation","props","propsEqual","lastProp","stopAnimation","lastProps","newProps","equals","updateLabelShowHide","labelEl","getHandleTransProps","trans","updateMandatoryProps","silent","traverse","_group","_lastGraphicKey","_handle","_dragging","_lastValue","_lastStatus","_payloadInfo","animationThreshold","_axisModel","_axisPointerModel","clear","_moveAnimation","determineAnimation","doUpdateProps","updatePointerEl","updateLabelEl","Group","createPointerEl","createLabelEl","_renderHandle","isCategoryAxis","useSnap","abs","pointerEl","setStyle","isInit","handleModel","createIcon","cursor","draggable","stop","onmousedown","_onHandleDragMove","drift","ondragend","_onHandleDragEnd","includeStyles","getItemStyle","handleSize","createOrUpdate","_moveHandleToValue","dx","dy","_doDispatchAxisPointer","payloadInfo","doClear","buildLabel","xy","wh","xDimIndex","enableClassExtend","modelHelper","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","outputFinder","showValueMap","list","updaters","showPointer","showTooltip","coordSysContainsPoint","containPoint","inputAxisInfo","findInputAxisInfo","pointToData","processOnAxis","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","dontSnap","containData","buildPayloadsBySeries","payloadBatch","snapToValue","minDist","Number","MAX_VALUE","minDiff","seriesNestestValue","dataIndices","dataDim","getAxisTooltipData","nestestValue","indicesOfNearest","isFinite","diff","dist","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","mainType","outputAxesInfo","valItem","sampleItem","escapeConnect","highDownKey","lastHighlights","newHighlights","batchItem","toHighlight","toDownplay","batch","axisName","isNaN","_util","_number","isRadianAroundZero","remRadian","_symbol","createSymbol","matrixUtil","_vector","v2ApplyTransform","_axisHelper","shouldShowAllLabels","AxisBuilder","dumbGroup","updateTransform","_transform","_dumbGroup","hasBuilder","builders","call","getGroup","axisLine","matrix","pt1","pt2","lineCap","getLineStyle","Line","anid","x1","y1","x2","y2","strokeContainThreshold","arrows","arrowSize","arrowOffset","symbolWidth","symbolHeight","rotate","offset","r","sqrt","symbol","stroke","cos","sin","axisTickLabel","tickEls","buildAxisTick","labelEls","buildAxisLabel","fixMinMaxLabelShow","labelLayout","axisNameAvailableWidth","nameLocation","gapSignal","isNameLocationCenter","nameRotation","innerTextLayout","endTextLayout","textFont","truncateOpt","ellipsis","maxWidth","nameTruncateMaxWidth","truncatedText","truncateText","minChar","placeholder","formatterParams","componentType","$vars","textEl","__fullText","__truncatedText","isLabelSilent","setTextStyle","textAlign","textVerticalAlign","eventData","makeAxisEventDataBase","targetType","decomposeTransform","axisRotation","textRotation","direction","rotationDiff","textPosition","textRotate","inverse","onLeft","showMinLabel","showMaxLabel","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","nextTick","lastTick","prevTick","ignoreEl","isTwoLabelOverlapped","ignore","current","next","firstRect","nextRect","mRotationBack","identity","mul","getLocalTransform","intersect","axisBuilder","tickModel","lineStyleModel","tickLen","ticksCoords","getTicksCoords","tickCoord","coord","tickEl","tickValue","axisLabelShow","labelModel","labels","getViewLabels","labelRotation","rawCategoryData","getCategories","triggerEvent","labelItem","formattedLabel","rawLabel","itemLabelModel","textColor","getShallow","textContain","styleModel","fill","getAreaStyle","buildLabelElOption","labelPos","paddings","font","textRect","confineInContainer","bgColor","lineWidth","getLabel","axisDimension","seriesData","isString","replace","isFunction","create","translate","textLayout","p1","p2","makeSectorShape","r0","startAngle","endAngle","clockwise"],"mappings":"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","file":"js/chunk-5bf62600.6685c09b.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./axisPointer\");\n\nrequire(\"./tooltip/TooltipModel\");\n\nrequire(\"./tooltip/TooltipView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Better way to pack data in graphic element\n\n/**\n * @action\n * @property {string} type\n * @property {number} seriesIndex\n * @property {number} dataIndex\n * @property {number} [x]\n * @property {number} [y]\n */\necharts.registerAction({\n  type: 'showTip',\n  event: 'showTip',\n  update: 'tooltip:manuallyShowTip'\n}, // noop\nfunction () {});\necharts.registerAction({\n  type: 'hideTip',\n  event: 'hideTip',\n  update: 'tooltip:manuallyHideTip'\n}, // noop\nfunction () {});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Can only be called after coordinate system creation stage.\n * (Can be called before coordinate system update stage).\n *\n * @param {Object} opt {labelInside}\n * @return {Object} {\n *  position, rotation, labelDirection, labelOffset,\n *  tickDirection, labelRotate, z2\n * }\n */\nfunction layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  } // Axis position\n\n\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]]; // Axis rotation\n\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1); // Tick and label direction, x y is axisDim\n\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n\n  if (axisModel.get('axisTick.inside')) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get('axisLabel.inside'))) {\n    layout.labelDirection = -layout.labelDirection;\n  } // Special label rotation\n\n\n  var labelRotate = axisModel.get('axisLabel.rotate');\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate; // Over splitLine and splitArea\n\n  layout.z2 = 1;\n  return layout;\n}\n\nexports.layout = layout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar eventUtil = require(\"zrender/lib/core/event\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar formatUtil = require(\"../../util/format\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar toCamelCase = formatUtil.toCamelCase;\nvar vendors = ['', '-webkit-', '-moz-', '-o-'];\nvar gCssText = 'position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;';\n/**\n * @param {number} duration\n * @return {string}\n * @inner\n */\n\nfunction assembleTransition(duration) {\n  var transitionCurve = 'cubic-bezier(0.23, 1, 0.32, 1)';\n  var transitionText = 'left ' + duration + 's ' + transitionCurve + ',' + 'top ' + duration + 's ' + transitionCurve;\n  return zrUtil.map(vendors, function (vendorPrefix) {\n    return vendorPrefix + 'transition:' + transitionText;\n  }).join(';');\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  fontSize && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n/**\n * @param {Object} tooltipModel\n * @return {string}\n * @inner\n */\n\n\nfunction assembleCssText(tooltipModel) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = tooltipModel.get('padding'); // Animation transition. Do not animate when transitionDuration is 0.\n\n  transitionDuration && cssText.push(assembleTransition(transitionDuration));\n\n  if (backgroundColor) {\n    if (env.canvasSupported) {\n      cssText.push('background-Color:' + backgroundColor);\n    } else {\n      // for ie\n      cssText.push('background-Color:#' + zrColor.toHex(backgroundColor));\n      cssText.push('filter:alpha(opacity=70)');\n    }\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + formatUtil.normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n}\n/**\n * @alias module:echarts/component/tooltip/TooltipContent\n * @constructor\n */\n\n\nfunction TooltipContent(container, api) {\n  if (env.wxa) {\n    return null;\n  }\n\n  var el = document.createElement('div');\n  var zr = this._zr = api.getZr();\n  this.el = el;\n  this._x = api.getWidth() / 2;\n  this._y = api.getHeight() / 2;\n  container.appendChild(el);\n  this._container = container;\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout; // FIXME\n  // Is it needed to trigger zr event manually if\n  // the browser do not support `pointer-events: none`.\n\n  var self = this;\n\n  el.onmouseenter = function () {\n    // clear the timeout in hideLater and keep showing tooltip\n    if (self._enterable) {\n      clearTimeout(self._hideTimeout);\n      self._show = true;\n    }\n\n    self._inContent = true;\n  };\n\n  el.onmousemove = function (e) {\n    e = e || window.event;\n\n    if (!self._enterable) {\n      // `pointer-events: none` is set to tooltip content div\n      // if `enterable` is set as `false`, and `el.onmousemove`\n      // can not be triggered. But in browser that do not\n      // support `pointer-events`, we need to do this:\n      // Try trigger zrender event to avoid mouse\n      // in and out shape too frequently\n      var handler = zr.handler;\n      eventUtil.normalizeEvent(container, e, true);\n      handler.dispatch('mousemove', e);\n    }\n  };\n\n  el.onmouseleave = function () {\n    if (self._enterable) {\n      if (self._show) {\n        self.hideLater(self._hideDelay);\n      }\n    }\n\n    self._inContent = false;\n  };\n}\n\nTooltipContent.prototype = {\n  constructor: TooltipContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function () {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var stl = container.currentStyle || document.defaultView.getComputedStyle(container);\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && stl.position !== 'absolute') {\n      domStyle.position = 'relative';\n    } // Hide the tooltip\n    // PENDING\n    // this.hide();\n\n  },\n  show: function (tooltipModel) {\n    clearTimeout(this._hideTimeout);\n    var el = this.el;\n    el.style.cssText = gCssText + assembleCssText(tooltipModel) // Because of the reason described in:\n    // http://stackoverflow.com/questions/21125587/css3-transition-not-working-in-chrome-anymore\n    // we should set initial value to `left` and `top`.\n    + ';left:' + this._x + 'px;top:' + this._y + 'px;' + (tooltipModel.get('extraCssText') || '');\n    el.style.display = el.innerHTML ? 'block' : 'none'; // If mouse occsionally move over the tooltip, a mouseout event will be\n    // triggered by canvas, and cuase some unexpectable result like dragging\n    // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n    // it. Although it is not suppored by IE8~IE10, fortunately it is a rare\n    // scenario.\n\n    el.style.pointerEvents = this._enterable ? 'auto' : 'none';\n    this._show = true;\n  },\n  setContent: function (content) {\n    this.el.innerHTML = content == null ? '' : content;\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var el = this.el;\n    return [el.clientWidth, el.clientHeight];\n  },\n  moveTo: function (x, y) {\n    // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n    var zr = this._zr;\n    var viewportRootOffset;\n\n    if (zr && zr.painter && (viewportRootOffset = zr.painter.getViewportRootOffset())) {\n      x += viewportRootOffset.offsetLeft;\n      y += viewportRootOffset.offsetTop;\n    }\n\n    var style = this.el.style;\n    style.left = x + 'px';\n    style.top = y + 'px';\n    this._x = x;\n    this._y = y;\n  },\n  hide: function () {\n    this.el.style.display = 'none';\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  getOuterSize: function () {\n    var width = this.el.clientWidth;\n    var height = this.el.clientHeight; // Consider browser compatibility.\n    // IE8 does not support getComputedStyle.\n\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      var stl = document.defaultView.getComputedStyle(this.el);\n\n      if (stl) {\n        width += parseInt(stl.borderLeftWidth, 10) + parseInt(stl.borderRightWidth, 10);\n        height += parseInt(stl.borderTopWidth, 10) + parseInt(stl.borderBottomWidth, 10);\n      }\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n};\nvar _default = TooltipContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param {module:echarts/model/Global} ecModel\n * @return {Object} {point: [x, y], el: ...} point Will not be null.\n */\nfunction _default(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n      return data.mapDimension(dim);\n    }), dataIndex, true)) || [];\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n\n  return {\n    point: point,\n    el: el\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\n\nfunction register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\n\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n  useHandler('globalout', onLeave);\n\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\n\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\n\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\n\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\n\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  }; // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\nfunction unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}\n\nexports.register = register;\nexports.unregister = unregister;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar TooltipContent = require(\"./TooltipContent\");\n\nvar TooltipRichContent = require(\"./TooltipRichContent\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar findPointFromSeries = require(\"../axisPointer/findPointFromSeries\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar Model = require(\"../../model/Model\");\n\nvar globalListener = require(\"../axisPointer/globalListener\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar axisPointerViewHelper = require(\"../axisPointer/viewHelper\");\n\nvar _model = require(\"../../util/model\");\n\nvar getTooltipRenderMode = _model.getTooltipRenderMode;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar bind = zrUtil.bind;\nvar each = zrUtil.each;\nvar parsePercent = numberUtil.parsePercent;\nvar proxyRect = new graphic.Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar _default = echarts.extendComponentView({\n  type: 'tooltip',\n  init: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = tooltipModel.get('renderMode');\n    this._renderMode = getTooltipRenderMode(renderMode);\n    var tooltipContent;\n\n    if (this._renderMode === 'html') {\n      tooltipContent = new TooltipContent(api.getDom(), api);\n      this._newLine = '<br/>';\n    } else {\n      tooltipContent = new TooltipRichContent(api);\n      this._newLine = '\\n';\n    }\n\n    this._tooltipContent = tooltipContent;\n  },\n  render: function (tooltipModel, ecModel, api) {\n    if (env.node) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    /**\n     * @private\n     * @type {module:echarts/component/tooltip/TooltipModel}\n     */\n\n    this._tooltipModel = tooltipModel;\n    /**\n     * @private\n     * @type {module:echarts/model/Global}\n     */\n\n    this._ecModel = ecModel;\n    /**\n     * @private\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this._api = api;\n    /**\n     * Should be cleaned when render.\n     * @private\n     * @type {Array.<Array.<Object>>}\n     */\n\n    this._lastDataByCoordSys = null;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update();\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow();\n  },\n  _initGlobalListener: function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  },\n  _keepShow: function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api; // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && tooltipModel.get('triggerOn') !== 'none') {\n      var self = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self._lastX,\n          y: self._lastY\n        });\n      });\n    }\n  },\n\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n  manuallyShowTip: function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n\n    if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.position = [payload.x, payload.y];\n      el.update();\n      el.tooltip = payload.tooltip; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        event: {},\n        dataByCoordSys: payload.dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          position: payload.position,\n          target: pointInfo.el,\n          event: {}\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target,\n        event: {}\n      }, dispatchAction);\n    }\n  },\n  manuallyHideTip: function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent && this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  },\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  _manuallyAxisShowTip: function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model, tooltipModel]);\n\n    if (tooltipModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  },\n  _tryShow: function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } // Always show item tooltip if mouse is on the element with dataIndex\n    else if (el && el.dataIndex != null) {\n        this._lastDataByCoordSys = null;\n\n        this._showSeriesItemTooltip(e, el, dispatchAction);\n      } // Tooltip provided directly. Like legend.\n      else if (el && el.tooltip) {\n          this._lastDataByCoordSys = null;\n\n          this._showComponentItemTooltip(e, el, dispatchAction);\n        } else {\n          this._lastDataByCoordSys = null;\n\n          this._hide(dispatchAction);\n        }\n  },\n  _showOrMove: function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easyer to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = zrUtil.bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  },\n  _showAxisTooltip: function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleDefaultHTML = [];\n    var singleParamsList = [];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption, globalTooltipModel]);\n    var renderMode = this._renderMode;\n    var newLine = this._newLine;\n    var markers = {};\n    each(dataByCoordSys, function (itemCoordSys) {\n      // var coordParamList = [];\n      // var coordDefaultHTML = [];\n      // var coordTooltipModel = buildTooltipModel([\n      //     e.tooltipOption,\n      //     itemCoordSys.tooltipOption,\n      //     ecModel.getComponent(itemCoordSys.coordSysMainType, itemCoordSys.coordSysIndex),\n      //     globalTooltipModel\n      // ]);\n      // var displayMode = coordTooltipModel.get('displayMode');\n      // var paramsList = displayMode === 'single' ? singleParamsList : [];\n      each(itemCoordSys.dataByAxis, function (item) {\n        var axisModel = ecModel.getComponent(item.axisDim + 'Axis', item.axisIndex);\n        var axisValue = item.value;\n        var seriesDefaultHTML = [];\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var valueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, item.seriesDataIndices, item.valueLabelOpt);\n        zrUtil.each(item.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var dataParams = series && series.getDataParams(dataIndex);\n          dataParams.axisDim = item.axisDim;\n          dataParams.axisIndex = item.axisIndex;\n          dataParams.axisType = item.axisType;\n          dataParams.axisId = item.axisId;\n          dataParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, axisValue);\n          dataParams.axisValueLabel = valueLabel;\n\n          if (dataParams) {\n            singleParamsList.push(dataParams);\n            var seriesTooltip = series.formatTooltip(dataIndex, true, null, renderMode);\n            var html;\n\n            if (zrUtil.isObject(seriesTooltip)) {\n              html = seriesTooltip.html;\n              var newMarkers = seriesTooltip.markers;\n              zrUtil.merge(markers, newMarkers);\n            } else {\n              html = seriesTooltip;\n            }\n\n            seriesDefaultHTML.push(html);\n          }\n        }); // Default tooltip content\n        // FIXME\n        // (1) shold be the first data which has name?\n        // (2) themeRiver, firstDataIndex is array, and first line is unnecessary.\n\n        var firstLine = valueLabel;\n\n        if (renderMode !== 'html') {\n          singleDefaultHTML.push(seriesDefaultHTML.join(newLine));\n        } else {\n          singleDefaultHTML.push((firstLine ? formatUtil.encodeHTML(firstLine) + newLine : '') + seriesDefaultHTML.join(newLine));\n        }\n      });\n    }, this); // In most case, the second axis is shown upper than the first one.\n\n    singleDefaultHTML.reverse();\n    singleDefaultHTML = singleDefaultHTML.join(this._newLine + this._newLine);\n    var positionExpr = e.position;\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, singleParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, singleDefaultHTML, singleParamsList, Math.random(), point[0], point[1], positionExpr, undefined, markers);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  },\n  _showSeriesItemTooltip: function (e, el, dispatchAction) {\n    var ecModel = this._ecModel; // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = el.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = el.dataModel || seriesModel;\n    var dataIndex = el.dataIndex;\n    var dataType = el.dataType;\n    var data = dataModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model, this._tooltipModel]);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var seriesTooltip = dataModel.formatTooltip(dataIndex, false, dataType, this._renderMode);\n    var defaultHtml;\n    var markers;\n\n    if (zrUtil.isObject(seriesTooltip)) {\n      defaultHtml = seriesTooltip.html;\n      markers = seriesTooltip.markers;\n    } else {\n      defaultHtml = seriesTooltip;\n      markers = null;\n    }\n\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, defaultHtml, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markers);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  },\n  _showComponentItemTooltip: function (e, el, dispatchAction) {\n    var tooltipOpt = el.tooltip;\n\n    if (typeof tooltipOpt === 'string') {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var subTooltipModel = new Model(tooltipOpt, this._tooltipModel, this._ecModel);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on cooridinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      this._showTooltipContent(subTooltipModel, defaultHtml, subTooltipModel.get('formatterParams') || {}, asyncTicket, e.offsetX, e.offsetY, e.position, el);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  },\n  _showTooltipContent: function (tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markers) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    if (formatter && typeof formatter === 'string') {\n      html = formatUtil.formatTpl(formatter, params, true);\n    } else if (typeof formatter === 'function') {\n      var callback = bind(function (cbTicket, html) {\n        if (cbTicket === this._ticket) {\n          tooltipContent.setContent(html, markers, tooltipModel);\n\n          this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n        }\n      }, this);\n      this._ticket = asyncTicket;\n      html = formatter(params, asyncTicket, callback);\n    }\n\n    tooltipContent.setContent(html, markers, tooltipModel);\n    tooltipContent.show(tooltipModel);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  },\n\n  /**\n   * @param  {string|Function|Array.<number>|Object} positionExpr\n   * @param  {number} x Mouse x\n   * @param  {number} y Mouse y\n   * @param  {boolean} confine Whether confine tooltip content in view rect.\n   * @param  {Object|<Array.<Object>} params\n   * @param  {module:zrender/Element} el target element\n   * @param  {module:echarts/ExtensionAPI} api\n   * @return {Array.<number>}\n   */\n  _updatePosition: function (tooltipModel, positionExpr, x, y, content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (typeof positionExpr === 'function') {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (zrUtil.isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (zrUtil.isObject(positionExpr)) {\n      positionExpr.width = contentSize[0];\n      positionExpr.height = contentSize[1];\n      var layoutRect = layoutUtil.getLayoutRect(positionExpr, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (typeof positionExpr === 'string' && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize);\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (tooltipModel.get('confine')) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  },\n  // FIXME\n  // Should we remove this but leave this to user?\n  _updateContentNotChangedOnAxis: function (dataByCoordSys) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || {};\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged &= lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged &= lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged &= lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    return !!contentNotChanged;\n  },\n  _hide: function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  },\n  dispose: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    this._tooltipContent.hide();\n\n    globalListener.unregister('itemTooltip', api);\n  }\n});\n/**\n * @param {Array.<Object|module:echarts/model/Model>} modelCascade\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade) {\n  var resultModel = modelCascade.pop();\n\n  while (modelCascade.length) {\n    var tooltipOpt = modelCascade.pop();\n\n    if (tooltipOpt) {\n      if (Model.isInstance(tooltipOpt)) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (typeof tooltipOpt === 'string') {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      resultModel = new Model(tooltipOpt, resultModel, resultModel.ecModel);\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n\n  if (gapH != null) {\n    if (x + width + gapH > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var gap = 5;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - gap;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + gap;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerModel = echarts.extendComponentModel({\n  type: 'axisPointer',\n  coordSysAxesInfo: null,\n  defaultOption: {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: null,\n    // set default in AxisPonterView.js\n    zlevel: 0,\n    z: 50,\n    type: 'line',\n    // 'line' 'shadow' 'cross' 'none'.\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    value: null,\n    status: null,\n    // Init value depends on whether handle is used.\n    // [group0, group1, ...]\n    // Each group can be: {\n    //      mapper: function () {},\n    //      singleTooltip: 'multiple',  // 'multiple' or 'single'\n    //      xAxisId: ...,\n    //      yAxisName: ...,\n    //      angleAxisIndex: ...\n    // }\n    // mapper: can be ignored.\n    //      input: {axisInfo, value}\n    //      output: {axisInfo, value}\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      type: 'solid'\n    },\n    shadowStyle: {\n      color: 'rgba(150,150,150,0.3)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      // string | Function\n      precision: 'auto',\n      // Or a number like 0, 1, 2 ...\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      // default: axis line color\n      borderColor: null,\n      borderWidth: 0,\n      shadowBlur: 3,\n      shadowColor: '#aaa' // Considering applicability, common style should\n      // better not have shadowOffset.\n      // shadowOffsetX: 0,\n      // shadowOffsetY: 2\n\n    },\n    handle: {\n      show: false,\n\n      /* eslint-disable */\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      // jshint ignore:line\n\n      /* eslint-enable */\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  }\n});\nvar _default = AxisPointerModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar BaseAxisPointer = require(\"./BaseAxisPointer\");\n\nvar viewHelper = require(\"./viewHelper\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\nvar AxisView = require(\"../axis/AxisView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar CartesianAxisPointer = BaseAxisPointer.extend({\n  /**\n   * @override\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  },\n\n  /**\n   * @override\n   */\n  getHandleTransform: function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    });\n    layoutInfo.labelMargin = axisPointerModel.get('handle.margin');\n    return {\n      position: viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo),\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  },\n\n  /**\n   * @override\n   */\n  updateHandleTransform: function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = transform.position;\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      position: currPosition,\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  }\n});\n\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\n\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\n\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\n\nAxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\nvar _default = CartesianAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar axisPointerModelHelper = require(\"../axisPointer/modelHelper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Base class of AxisView.\n */\nvar AxisView = echarts.extendComponentView({\n  type: 'axis',\n\n  /**\n   * @private\n   */\n  _axisPointer: null,\n\n  /**\n   * @protected\n   * @type {string}\n   */\n  axisPointerClass: null,\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n    AxisView.superApply(this, 'render', arguments);\n    updateAxisPointer(this, axisModel, ecModel, api, payload, true);\n  },\n\n  /**\n   * Action handler.\n   * @public\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/model/Global} ecModel\n   * @param {module:echarts/ExtensionAPI} api\n   * @param {Object} payload\n   */\n  updateAxisPointer: function (axisModel, ecModel, api, payload, force) {\n    updateAxisPointer(this, axisModel, ecModel, api, payload, false);\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n    AxisView.superApply(this, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    disposeAxisPointer(this, api);\n    AxisView.superApply(this, 'dispose', arguments);\n  }\n});\n\nfunction updateAxisPointer(axisView, axisModel, ecModel, api, payload, forceRender) {\n  var Clazz = AxisView.getAxisPointerClass(axisView.axisPointerClass);\n\n  if (!Clazz) {\n    return;\n  }\n\n  var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n  axisPointerModel ? (axisView._axisPointer || (axisView._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : disposeAxisPointer(axisView, api);\n}\n\nfunction disposeAxisPointer(axisView, ecModel, api) {\n  var axisPointer = axisView._axisPointer;\n  axisPointer && axisPointer.dispose(ecModel, api);\n  axisView._axisPointer = null;\n}\n\nvar axisPointerClazz = [];\n\nAxisView.registerAxisPointerClass = function (type, clazz) {\n  axisPointerClazz[type] = clazz;\n};\n\nAxisView.getAxisPointerClass = function (type) {\n  return type && axisPointerClazz[type];\n};\n\nvar _default = AxisView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Text = require(\"zrender/lib/graphic/Text\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import Group from 'zrender/src/container/Group';\n\n/**\n * @alias module:echarts/component/tooltip/TooltipRichContent\n * @constructor\n */\nfunction TooltipRichContent(api) {\n  this._zr = api.getZr();\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout;\n}\n\nTooltipRichContent.prototype = {\n  constructor: TooltipRichContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function () {// noop\n  },\n  show: function (tooltipModel) {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    this.el.attr('show', true);\n    this._show = true;\n  },\n\n  /**\n   * Set tooltip content\n   *\n   * @param {string} content rich text string of content\n   * @param {Object} markerRich rich text style\n   * @param {Object} tooltipModel tooltip model\n   */\n  setContent: function (content, markerRich, tooltipModel) {\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n\n    var markers = {};\n    var text = content;\n    var prefix = '{marker';\n    var suffix = '|}';\n    var startId = text.indexOf(prefix);\n\n    while (startId >= 0) {\n      var endId = text.indexOf(suffix);\n      var name = text.substr(startId + prefix.length, endId - startId - prefix.length);\n\n      if (name.indexOf('sub') > -1) {\n        markers['marker' + name] = {\n          textWidth: 4,\n          textHeight: 4,\n          textBorderRadius: 2,\n          textBackgroundColor: markerRich[name],\n          // TODO: textOffset is not implemented for rich text\n          textOffset: [3, 0]\n        };\n      } else {\n        markers['marker' + name] = {\n          textWidth: 10,\n          textHeight: 10,\n          textBorderRadius: 5,\n          textBackgroundColor: markerRich[name]\n        };\n      }\n\n      text = text.substr(endId + 1);\n      startId = text.indexOf('{marker');\n    }\n\n    this.el = new Text({\n      style: {\n        rich: markers,\n        text: content,\n        textLineHeight: 20,\n        textBackgroundColor: tooltipModel.get('backgroundColor'),\n        textBorderRadius: tooltipModel.get('borderRadius'),\n        textFill: tooltipModel.get('textStyle.color'),\n        textPadding: tooltipModel.get('padding')\n      },\n      z: tooltipModel.get('z')\n    });\n\n    this._zr.add(this.el);\n\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n\n      self._inContent = false;\n    });\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var bounding = this.el.getBoundingRect();\n    return [bounding.width, bounding.height];\n  },\n  moveTo: function (x, y) {\n    if (this.el) {\n      this.el.attr('position', [x, y]);\n    }\n  },\n  hide: function () {\n    if (this.el) {\n      this.el.hide();\n    }\n\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  getOuterSize: function () {\n    var size = this.getSize();\n    return {\n      width: size[0],\n      height: size[1]\n    };\n  }\n};\nvar _default = TooltipRichContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendComponentModel({\n  type: 'tooltip',\n  dependencies: ['axisPointer'],\n  defaultOption: {\n    zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip主体内容\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    // 'single' | 'multipleByCoordSys'\n    renderMode: 'auto',\n    // 'auto' | 'html' | 'richText'\n    // 'auto': use html by default, and use non-html if `document` is not defined\n    // 'html': use html for tooltip\n    // 'richText': use canvas, svg, and etc. for tooltip\n    // 位置 {Array} | {Function}\n    // position: null\n    // Consider triggered from axisPointer handle, verticalAlign should be 'middle'\n    // align: null,\n    // verticalAlign: null,\n    // 是否约束 content 在 viewRect 中。默认 false 是为了兼容以前版本。\n    confine: false,\n    // 内容格式器：{string}（Template） ¦ {Function}\n    // formatter: null\n    showDelay: 0,\n    // 隐藏延迟，单位ms\n    hideDelay: 100,\n    // 动画变换时间，单位s\n    transitionDuration: 0.4,\n    enterable: false,\n    // 提示背景颜色，默认为透明度为0.7的黑色\n    backgroundColor: 'rgba(50,50,50,0.7)',\n    // 提示边框颜色\n    borderColor: '#333',\n    // 提示边框圆角，单位px，默认为4\n    borderRadius: 4,\n    // 提示边框线宽，单位px，默认为0（无边框）\n    borderWidth: 0,\n    // 提示内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    padding: 5,\n    // Extra css text\n    extraCssText: '',\n    // 坐标轴指示器，坐标轴触发有效\n    axisPointer: {\n      // 默认为直线\n      // 可选为：'line' | 'shadow' | 'cross'\n      type: 'line',\n      // type 为 line 的时候有效，指定 tooltip line 所在的轴，可选\n      // 可选 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // 默认 'auto'，会选择类型为 category 的轴，对于双数值轴，笛卡尔坐标系会默认选择 x 轴\n      // 极坐标系会默认选择 angle 轴\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {} // lineStyle and shadowStyle should not be specified here,\n        // otherwise it will always override those styles on option.axisPointer.\n\n      }\n    },\n    textStyle: {\n      color: '#fff',\n      fontSize: 14\n    }\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisPointerModelHelper = require(\"./axisPointer/modelHelper\");\n\nvar axisTrigger = require(\"./axisPointer/axisTrigger\");\n\nrequire(\"./axisPointer/AxisPointerModel\");\n\nrequire(\"./axisPointer/AxisPointerView\");\n\nrequire(\"./axisPointer/CartesianAxisPointer\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// CartesianAxisPointer is not supposed to be required here. But consider\n// echarts.simple.js and online build tooltip, which only require gridSimple,\n// CartesianAxisPointer should be able to required somewhere.\necharts.registerPreprocessor(function (option) {\n  // Always has a global axisPointerModel for default setting.\n  if (option) {\n    (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n    var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n    // is not set, remain null/undefined, otherwise it will\n    // override existent link setting.\n\n    if (link && !zrUtil.isArray(link)) {\n      option.axisPointer.link = [link];\n    }\n  }\n}); // This process should proformed after coordinate systems created\n// and series data processed. So put it on statistic processing stage.\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n  // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n  // allAxesInfo should be updated when setOption performed.\n  ecModel.getComponent('axisPointer').coordSysAxesInfo = axisPointerModelHelper.collect(ecModel, api);\n}); // Broadcast to all views.\n\necharts.registerAction({\n  type: 'updateAxisPointer',\n  event: 'updateAxisPointer',\n  update: ':updateAxisPointer'\n}, axisTrigger);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry; // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\n\nfunction collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\n\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = []; // Collect axes info.\n\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n    // for user. So we enable seting tooltip on coordSys model.\n\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n    if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get('axisPointer.type') === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get('axisPointer.axis'));\n\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    } // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n\n\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var key = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n      var axisInfo = result.axesInfo[key] = {\n        key: key,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: []\n      };\n      axesInfoInCoordSys[key] = axisInfo;\n      result.seriesInvolved |= involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[key] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\n\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var volatileOption = {};\n  each(['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'], function (field) {\n    volatileOption[field] = zrUtil.clone(tooltipAxisPointerModel.get(field));\n  }); // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n  // Only these properties can be overrided from tooltip to axisPointer.\n\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n\n  var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n  labelOption.show == null && (labelOption.show = false);\n\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get('label.show');\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true; // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && zrUtil.defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\n\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get('tooltip.trigger', true);\n    var seriesTooltipShow = seriesModel.get('tooltip.show', true);\n\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get('axisPointer.show', true) === false) {\n      return;\n    }\n\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  }, this);\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\n\n\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\n\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || zrUtil.isArray(linkPropValue) && zrUtil.indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\n\nfunction fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n\n  if (!axisInfo) {\n    return;\n  }\n\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n  if (value != null) {\n    value = scale.parse(value);\n  }\n\n  var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n\n  if ( // Pick a value on axis when initializing.\n  value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n\n  option.value = value;\n\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\n\nfunction getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\n\nfunction getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\n\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get('handle.show');\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\n\n\nfunction makeKey(model) {\n  return model.type + '||' + model.id;\n}\n\nexports.collect = collect;\nexports.fixValue = fixValue;\nexports.getAxisInfo = getAxisInfo;\nexports.getAxisPointerModel = getAxisPointerModel;\nexports.makeKey = makeKey;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar globalListener = require(\"./globalListener\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerView = echarts.extendComponentView({\n  type: 'axisPointer',\n  render: function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    globalListener.unregister(api.getZr(), 'axisPointer');\n    AxisPointerView.superApply(this._model, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n    AxisPointerView.superApply(this._model, 'dispose', arguments);\n  }\n});\nvar _default = AxisPointerView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar clazzUtil = require(\"../../util/clazz\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar axisPointerModelHelper = require(\"./modelHelper\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar throttleUtil = require(\"../../util/throttle\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n * Implemenents {module:echarts/component/axis/IAxisPointer}.\n */\n\nfunction BaseAxisPointer() {}\n\nBaseAxisPointer.prototype = {\n  /**\n   * @private\n   */\n  _group: null,\n\n  /**\n   * @private\n   */\n  _lastGraphicKey: null,\n\n  /**\n   * @private\n   */\n  _handle: null,\n\n  /**\n   * @private\n   */\n  _dragging: false,\n\n  /**\n   * @private\n   */\n  _lastValue: null,\n\n  /**\n   * @private\n   */\n  _lastStatus: null,\n\n  /**\n   * @private\n   */\n  _payloadInfo: null,\n\n  /**\n   * In px, arbitrary value. Do not set too small,\n   * no animation is ok for most cases.\n   * @protected\n   */\n  animationThreshold: 15,\n\n  /**\n   * @implement\n   */\n  render: function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n\n    group && group.show();\n    handle && handle.show(); // Otherwise status is 'show'\n\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n    var graphicKey = elOption.graphicKey;\n\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps, axisPointerModel);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n\n    updateMandatoryProps(group, axisPointerModel, true);\n\n    this._renderHandle(value);\n  },\n\n  /**\n   * @implement\n   */\n  remove: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @implement\n   */\n  dispose: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @protected\n   */\n  determineAnimation: function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      } // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n\n\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent(); // Approximate band width\n\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n\n      return false;\n    }\n\n    return animation === true;\n  },\n\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n  },\n\n  /**\n   * @protected\n   */\n  createPointerEl: function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  createLabelEl: function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Rect(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updatePointerEl: function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updateLabelEl: function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        shape: elOption.label.shape,\n        position: elOption.label.position\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _renderHandle: function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n\n    var axisPointerModel = this._axisPointerModel;\n\n    var zr = this._api.getZr();\n\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n\n    var isInit;\n\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n    var includeStyles = ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n    handle.setStyle(handleModel.getItemStyle(null, includeStyles)); // update position\n\n    var handleSize = handleModel.get('size');\n\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n\n    handle.attr('scale', [handleSize[0] / 2, handleSize[1] / 2]);\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n    this._moveHandleToValue(value, isInit);\n  },\n\n  /**\n   * @private\n   */\n  _moveHandleToValue: function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragMove: function (dx, dy) {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    this._dragging = true; // Persistent for throttle.\n\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n\n    this._doDispatchAxisPointer();\n  },\n\n  /**\n   * Throttled method.\n   * @private\n   */\n  _doDispatchAxisPointer: function () {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragEnd: function (moveAnimation) {\n    this._dragging = false;\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n\n\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n\n\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  },\n\n  /**\n   * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {number} value\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0}\n   */\n  getHandleTransform: null,\n\n  /**\n   * * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {Object} transform {position, rotation}\n   * @param {Array.<number>} delta [dx, dy]\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0, cursorPoint: [x, y]}\n   */\n  updateHandleTransform: null,\n\n  /**\n   * @private\n   */\n  clear: function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n  },\n\n  /**\n   * @protected\n   */\n  doClear: function () {// Implemented by sub-class if necessary.\n  },\n\n  /**\n   * @protected\n   * @param {Array.<number>} xy\n   * @param {Array.<number>} wh\n   * @param {number} [xDimIndex=0] or 1\n   */\n  buildLabel: function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  }\n};\nBaseAxisPointer.prototype.constructor = BaseAxisPointer;\n\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\n\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals = equals && propsEqual(lastProps[key], item);\n    });\n    return !!equals;\n  } else {\n    return lastProps === newProps;\n  }\n}\n\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get('label.show') ? 'show' : 'hide']();\n}\n\nfunction getHandleTransProps(trans) {\n  return {\n    position: trans.position.slice(),\n    rotation: trans.rotation || 0\n  };\n}\n\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\n\nclazzUtil.enableClassExtend(BaseAxisPointer);\nvar _default = BaseAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar modelHelper = require(\"./modelHelper\");\n\nvar findPointFromSeries = require(\"./findPointFromSeries\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry;\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @param {Object} coordSysAxesInfo\n * @param {Object} payload\n * @param {string} [payload.currTrigger] 'click' | 'mousemove' | 'leave'\n * @param {Array.<number>} [payload.x] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Array.<number>} [payload.y] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Object} [payload.seriesIndex] finder, optional, restrict target axes.\n * @param {Object} [payload.dataIndex] finder, restrict target axes.\n * @param {Object} [payload.axesInfo] finder, restrict target axes.\n *        [{\n *          axisDim: 'x'|'y'|'angle'|...,\n *          axisIndex: ...,\n *          value: ...\n *        }, ...]\n * @param {Function} [payload.dispatchAction]\n * @param {Object} [payload.tooltipOption]\n * @param {Object|Array.<number>|Function} [payload.position] Tooltip position,\n *        which can be specified in dispatchAction\n * @param {module:echarts/model/Global} ecModel\n * @param {module:echarts/ExtensionAPI} api\n * @return {Object} content of event obj for echarts.connect.\n */\n\nfunction _default(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n  // See #6121. But we are not able to reproduce it yet.\n\n  if (!coordSysAxesInfo) {\n    return;\n  }\n\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputFinder = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  }; // Process for triggered axes.\n\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputFinder);\n      }\n    });\n  }); // Process for linked axes.\n\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputFinder);\n  });\n  updateModelActually(showValueMap, axesInfo, outputFinder);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputFinder;\n}\n\nfunction processOnAxis(axisInfo, newValue, updaters, dontSnap, outputFinder) {\n  var axis = axisInfo.axis;\n\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  } // Heavy calculation. So put it after axis.containData checking.\n\n\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n  // By defualt use the first involved series data as a sample to connect.\n\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    zrUtil.extend(outputFinder, payloadBatch[0]);\n  } // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n\n\n  if (!dontSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n\n  updaters.showPointer(axisInfo, newValue, payloadBatch, outputFinder); // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\n\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimension(dim, true);\n    var seriesNestestValue;\n    var dataIndices;\n\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n\n      if (!dataIndices.length) {\n        return;\n      }\n\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff); // Consider category case\n\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\n\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\n\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get('label.precision'),\n      formatter: axisPointerModel.get('label.formatter')\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\n\nfunction updateModelActually(showValueMap, axesInfo, outputFinder) {\n  var outputAxesInfo = outputFinder.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value; // For label formatter param and highlight.\n\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    } // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n        // If hide, value still need to be set, consider\n        // click legend to toggle axis blank.\n        !axisInfo.useHandle && (option.status = 'hide');\n      } // If status is 'hide', should be no info in payload.\n\n\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\n\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  } // In most case only one axis (or event one series is used). It is\n  // convinient to fetch payload.seriesIndex and payload.dataIndex\n  // dirtectly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n\n\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\n\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification shoule be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  }); // Diff.\n\n  var toHighlight = [];\n  var toDownplay = [];\n  zrUtil.each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  zrUtil.each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    batch: toHighlight\n  });\n}\n\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\n\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\n\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar retrieve = _util.retrieve;\nvar defaults = _util.defaults;\nvar extend = _util.extend;\nvar each = _util.each;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _number = require(\"../../util/number\");\n\nvar isRadianAroundZero = _number.isRadianAroundZero;\nvar remRadian = _number.remRadian;\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar matrixUtil = require(\"zrender/lib/core/matrix\");\n\nvar _vector = require(\"zrender/lib/core/vector\");\n\nvar v2ApplyTransform = _vector.applyTransform;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar shouldShowAllLabels = _axisHelper.shouldShowAllLabels;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PI = Math.PI;\n/**\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n * for example: (0, 0) ------------> (0, 50)\n *\n * nameDirection or tickDirection or labelDirection is 1 means tick\n * or label is below the standard axis, whereas is -1 means above\n * the standard axis. labelOffset means offset between label and axis,\n * which is useful when 'onZero', where axisLabel is in the grid and\n * label in outside grid.\n *\n * Tips: like always,\n * positive rotation represents anticlockwise, and negative rotation\n * represents clockwise.\n * The direction of position coordinate is the same as the direction\n * of screen coordinate.\n *\n * Do not need to consider axis 'inverse', which is auto processed by\n * axis extent.\n *\n * @param {module:zrender/container/Group} group\n * @param {Object} axisModel\n * @param {Object} opt Standard axis parameters.\n * @param {Array.<number>} opt.position [x, y]\n * @param {number} opt.rotation by radian\n * @param {number} [opt.nameDirection=1] 1 or -1 Used when nameLocation is 'middle' or 'center'.\n * @param {number} [opt.tickDirection=1] 1 or -1\n * @param {number} [opt.labelDirection=1] 1 or -1\n * @param {number} [opt.labelOffset=0] Usefull when onZero.\n * @param {string} [opt.axisLabelShow] default get from axisModel.\n * @param {string} [opt.axisName] default get from axisModel.\n * @param {number} [opt.axisNameAvailableWidth]\n * @param {number} [opt.labelRotate] by degree, default get from axisModel.\n * @param {number} [opt.strokeContainThreshold] Default label interval when label\n * @param {number} [opt.nameTruncateMaxWidth]\n */\n\nvar AxisBuilder = function (axisModel, opt) {\n  /**\n   * @readOnly\n   */\n  this.opt = opt;\n  /**\n   * @readOnly\n   */\n\n  this.axisModel = axisModel; // Default value\n\n  defaults(opt, {\n    labelOffset: 0,\n    nameDirection: 1,\n    tickDirection: 1,\n    labelDirection: 1,\n    silent: true\n  });\n  /**\n   * @readOnly\n   */\n\n  this.group = new graphic.Group(); // FIXME Not use a seperate text group?\n\n  var dumbGroup = new graphic.Group({\n    position: opt.position.slice(),\n    rotation: opt.rotation\n  }); // this.group.add(dumbGroup);\n  // this._dumbGroup = dumbGroup;\n\n  dumbGroup.updateTransform();\n  this._transform = dumbGroup.transform;\n  this._dumbGroup = dumbGroup;\n};\n\nAxisBuilder.prototype = {\n  constructor: AxisBuilder,\n  hasBuilder: function (name) {\n    return !!builders[name];\n  },\n  add: function (name) {\n    builders[name].call(this);\n  },\n  getGroup: function () {\n    return this.group;\n  }\n};\nvar builders = {\n  /**\n   * @private\n   */\n  axisLine: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n\n    if (!axisModel.get('axisLine.show')) {\n      return;\n    }\n\n    var extent = this.axisModel.axis.getExtent();\n    var matrix = this._transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel('axisLine.lineStyle').getLineStyle());\n    this.group.add(new graphic.Line({\n      // Id for animation\n      anid: 'line',\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    }));\n    var arrows = axisModel.get('axisLine.symbol');\n    var arrowSize = axisModel.get('axisLine.symbolSize');\n    var arrowOffset = axisModel.get('axisLine.symbolOffset') || 0;\n\n    if (typeof arrowOffset === 'number') {\n      arrowOffset = [arrowOffset, arrowOffset];\n    }\n\n    if (arrows != null) {\n      if (typeof arrows === 'string') {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n\n      if (typeof arrowSize === 'string' || typeof arrowSize === 'number') {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n\n      var symbolWidth = arrowSize[0];\n      var symbolHeight = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth / 2, -symbolHeight / 2, symbolWidth, symbolHeight, lineStyle.stroke, true); // Calculate arrow position with offset\n\n          var r = point.r + point.offset;\n          var pos = [pt1[0] + r * Math.cos(opt.rotation), pt1[1] - r * Math.sin(opt.rotation)];\n          symbol.attr({\n            rotation: point.rotate,\n            position: pos,\n            silent: true,\n            z2: 11\n          });\n          this.group.add(symbol);\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @private\n   */\n  axisTickLabel: function () {\n    var axisModel = this.axisModel;\n    var opt = this.opt;\n    var tickEls = buildAxisTick(this, axisModel, opt);\n    var labelEls = buildAxisLabel(this, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, tickEls);\n  },\n\n  /**\n   * @private\n   */\n  axisName: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n\n    if (!name) {\n      return;\n    }\n\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = this.axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // 'middle'\n    // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n\n    var axisNameAvailableWidth;\n\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth); // FIXME\n    // truncate rich text? (consider performance)\n\n    var truncatedText = ellipsis != null && maxWidth != null ? formatUtil.truncateText(name, maxWidth, textFont, ellipsis, {\n      minChar: 2,\n      placeholder: truncateOpt.placeholder\n    }) : name;\n    var tooltipOpt = axisModel.get('tooltip', true);\n    var mainType = axisModel.mainType;\n    var formatterParams = {\n      componentType: mainType,\n      name: name,\n      $vars: ['name']\n    };\n    formatterParams[mainType + 'Index'] = axisModel.componentIndex;\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'name',\n      __fullText: name,\n      __truncatedText: truncatedText,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: isLabelSilent(axisModel),\n      z2: 1,\n      tooltip: tooltipOpt && tooltipOpt.show ? extend({\n        content: name,\n        formatter: function () {\n          return name;\n        },\n        formatterParams: formatterParams\n      }, tooltipOpt) : null\n    });\n    graphic.setTextStyle(textEl.style, textStyleModel, {\n      text: truncatedText,\n      textFont: textFont,\n      textFill: textStyleModel.getTextColor() || axisModel.get('axisLine.lineStyle.color'),\n      textAlign: textStyleModel.get('align') || labelLayout.textAlign,\n      textVerticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n    });\n\n    if (axisModel.get('triggerEvent')) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisName';\n      textEl.eventData.name = name;\n    } // FIXME\n\n\n    this._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    this.group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\n\nvar makeAxisEventDataBase = AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n  var eventData = {\n    componentType: axisModel.mainType,\n    componentIndex: axisModel.componentIndex\n  };\n  eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n  return eventData;\n};\n/**\n * @public\n * @static\n * @param {Object} opt\n * @param {number} axisRotation in radian\n * @param {number} textRotation in radian\n * @param {number} direction\n * @return {Object} {\n *  rotation, // according to axis\n *  textAlign,\n *  textVerticalAlign\n * }\n */\n\n\nvar innerTextLayout = AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n  var rotationDiff = remRadian(textRotation - axisRotation);\n  var textAlign;\n  var textVerticalAlign;\n\n  if (isRadianAroundZero(rotationDiff)) {\n    // Label is parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI)) {\n    // Label is inverse parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff > 0 && rotationDiff < PI) {\n      textAlign = direction > 0 ? 'right' : 'left';\n    } else {\n      textAlign = direction > 0 ? 'left' : 'right';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n};\n\nfunction endTextLayout(opt, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - opt.rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n\nvar isLabelSilent = AxisBuilder.isLabelSilent = function (axisModel) {\n  var tooltipOpt = axisModel.get('tooltip');\n  return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n  || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n};\n\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  } // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n\n\n  var showMinLabel = axisModel.get('axisLabel.showMinLabel');\n  var showMaxLabel = axisModel.get('axisLabel.showMaxLabel'); // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\n\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\n\nfunction isTwoLabelOverlapped(current, next, labelLayout) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n\n  if (!firstRect || !nextRect) {\n    return;\n  } // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\n\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\n\nfunction buildAxisTick(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n\n  if (!axisModel.get('axisTick.show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var tickModel = axisModel.getModel('axisTick');\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickLen = tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var pt1 = [];\n  var pt2 = [];\n  var matrix = axisBuilder._transform;\n  var tickEls = [];\n\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = opt.tickDirection * tickLen;\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    } // Tick line, Not use group transform to have better line draw\n\n\n    var tickEl = new graphic.Line({\n      // Id for animation\n      anid: 'tick_' + ticksCoords[i].tickValue,\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: defaults(lineStyleModel.getLineStyle(), {\n        stroke: axisModel.get('axisLine.lineStyle.color')\n      }),\n      z2: 2,\n      silent: true\n    });\n    axisBuilder.group.add(tickEl);\n    tickEls.push(tickEl);\n  }\n\n  return tickEls;\n}\n\nfunction buildAxisLabel(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get('axisLabel.show'));\n\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels(); // Special label rotate.\n\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n\n    if (rawCategoryData && rawCategoryData[tickValue] && rawCategoryData[tickValue].textStyle) {\n      itemLabelModel = new Model(rawCategoryData[tickValue].textStyle, labelModel, axisModel.ecModel);\n    }\n\n    var textColor = itemLabelModel.getTextColor() || axisModel.get('axisLine.lineStyle.color');\n    var tickCoord = axis.dataToCoord(tickValue);\n    var pos = [tickCoord, opt.labelOffset + opt.labelDirection * labelMargin];\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'label_' + tickValue,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10\n    });\n    graphic.setTextStyle(textEl.style, itemLabelModel, {\n      text: formattedLabel,\n      textAlign: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n      textVerticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n      textFill: typeof textColor === 'function' ? textColor( // (1) In category axis with data zoom, tick is not the original\n      // index of axis.data. So tick should not be exposed to user\n      // in category axis.\n      // (2) Compatible with previous version, which always use formatted label as\n      // input. But in interval scale the formatted label is like '223,445', which\n      // maked user repalce ','. So we modify it to return original val but remain\n      // it as 'string' to avoid error in replacing.\n      axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n    }); // Pack data for mouse event\n\n    if (triggerEvent) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisLabel';\n      textEl.eventData.value = rawLabel;\n    } // FIXME\n\n\n    axisBuilder._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    axisBuilder.group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\n\nvar _default = AxisBuilder;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar AxisBuilder = require(\"../axis/AxisBuilder\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Model} axisPointerModel\n */\nfunction buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\n\n\nfunction buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get('label.precision'),\n    formatter: axisPointerModel.get('label.formatter')\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get('axisLine.lineStyle.color');\n  }\n\n  elOption.label = {\n    shape: {\n      x: 0,\n      y: 0,\n      width: width,\n      height: height,\n      r: labelModel.get('borderRadius')\n    },\n    position: position.slice(),\n    // TODO: rich\n    style: {\n      text: text,\n      textFont: font,\n      textFill: labelModel.getTextColor(),\n      textPosition: 'inside',\n      textPadding: paddings,\n      fill: bgColor,\n      stroke: labelModel.get('borderColor') || 'transparent',\n      lineWidth: labelModel.get('borderWidth') || 0,\n      shadowBlur: labelModel.get('shadowBlur'),\n      shadowColor: labelModel.get('shadowColor'),\n      shadowOffsetX: labelModel.get('shadowOffsetX'),\n      shadowOffsetY: labelModel.get('shadowOffsetY')\n    },\n    // Lable should be over axisPointer.\n    z2: 10\n  };\n} // Do not overflow ec container\n\n\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\n/**\n * @param {number} value\n * @param {module:echarts/coord/Axis} axis\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} opt\n * @param {Array.<Object>} seriesDataIndices\n * @param {number|string} opt.precision 'auto' or a number\n * @param {string|Function} opt.formatter label formatter\n */\n\n\nfunction getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel( // If `precision` is set, width can be fixed (like '12.00500'), which\n  // helps to debounce when when moving label.\n  value, {\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n\n  if (formatter) {\n    var params = {\n      value: axisHelper.getAxisRawValue(axis, value),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params.seriesData.push(dataParams);\n    });\n\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params);\n    }\n  }\n\n  return text;\n}\n/**\n * @param {module:echarts/coord/Axis} axis\n * @param {number} value\n * @param {Object} layoutInfo {\n *  rotation, position, labelOffset, labelDirection, labelMargin\n * }\n */\n\n\nfunction getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\n\nfunction buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get('label.margin');\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\n/**\n * @param {Array.<number>} p1\n * @param {Array.<number>} p2\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\n/**\n * @param {Array.<number>} xy\n * @param {Array.<number>} wh\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\n\nfunction makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}\n\nexports.buildElStyle = buildElStyle;\nexports.buildLabelElOption = buildLabelElOption;\nexports.getValueLabel = getValueLabel;\nexports.getTransformedPosition = getTransformedPosition;\nexports.buildCartesianSingleLabelElOption = buildCartesianSingleLabelElOption;\nexports.makeLineShape = makeLineShape;\nexports.makeRectShape = makeRectShape;\nexports.makeSectorShape = makeSectorShape;"],"sourceRoot":""}